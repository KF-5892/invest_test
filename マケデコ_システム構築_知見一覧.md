# マケデコ Discord「システム構築」チャンネル 知見一覧

マケデコDiscordのシステム構築チャンネル（2022年9月〜2026年2月）における議論から抽出した知見をカテゴリ別に整理したものです。

---

## 1. 定期実行・自動化基盤

- **GCP Cloud Functions + Cloud Scheduler** が、毎日モデルを動かす用途ではコスト面で優れている。訓練済みモデルを読み込み、最新日のデータ取得→予測→発注という軽量な処理であれば十分対応可能。（qash_nft, richwomanbtc, 2022/09）
- **Google Cloud Run + Scheduler + Terraform** の組み合わせで、Bot等の定期実行基盤を構築できる。Terraformでインフラをコード管理できるのが利点。（regonn, 2022/09）
- **Google Batch** は、コンテナ化に抵抗がなければ比較的簡単にジョブ実行でき、定期的な再学習・評価パイプラインにも便利。フルマネージドでインフラ管理不要。（kojisuganuma, 2023/01）
- **Vertex AI Workbench** はNotebookの定期実行が可能で、Notebook上での開発からそのまま自動化に移行できる。（tomo, 2022/09）

## 2. 証券会社API・発注手段

- 日本株でオフィシャルにAPIを提供している証券会社は主に3つ：**楽天証券RSS**、**auカブコム証券API**、**岡三証券API**。取り扱いアセットは各社で異なる。（tomo, 2022/09）
- **立花証券e支店API** はクラウドサーバーにデプロイして自動売買が可能で、暗号資産Botと同様の感覚で運用できる。ゲートウェイ不要なのがカブコムAPIに対する優位点。（katsu1110, 2023/02）
- **カブコムAPI** はKabuステーションの起動が必要でWindows環境に縛られるが、PUSH APIによるリアルタイム株価取得が可能。Claude Codeの登場でAPI操作の負担が大幅に軽減された。（UKI, 2026/02）
- API非対応の証券会社では、**SeleniumなどによるWeb発注の自動化**が選択肢になるが、スクレイピングの許可状況や負荷への配慮が必要で自己責任の領域。ヘッドレスモードでの発注は時間がかかりエラーも多い。（ともぞー, shinshin, 2022/09）
- **Playwrightを使った無理やりの自動化**が、API非対応の証券会社では依然として必要。（UKI, 2026/02）
- SBIネオトレードはエクセル連携方式のため使いづらい。楽天RSSもエクセルアドイン形式。（UKI, 2026/02）

## 3. 二段階認証・ログイン自動化の課題

- **Kabuステーションは日次で再起動が必要**で、サーバ起動時の各アプリ自動起動の整備が必須。2025年6月からメールによる二段階認証が加わり、自動化のハードルがさらに上昇。（hori_ryota, kazumoto#123, 2023/12〜2025/06）
- **二段階認証の自動化手法**として以下が議論されている：
  - IMAPでメール受信→送信元・件名でフィルタ→正規表現でワンタイムコードを抽出（lowlowlevelctf, 2025/08）
  - Gmail APIを利用してワンタイムパスワードを取得（GitHub issue #979参照）（umihico, 2025/08）
  - メールをAWS S3に転送し、そこからコードを抽出（umihico, 2025/08）
  - APIフレンドリーなメールサービスにワンタイムパスだけ転送し、提供APIで抽出（umihico, 2025/08）
- **立花証券e支店は2025年7月末から電話番号認証が必要**に。自動化手法として**Twilioで050番号を契約→登録番号としてログイン前にTwilioでcall**する方法が提案された。着信転送も設定すると安心。（kazumoto#123, Morim34, 2025/07）
- ワンタイムパスワードのメール到着が5分の有効期限内に届かないことがある点が実運用上の問題。（lowlowlevelctf, 2025/08）

## 4. システム構成・インフラ

- **Docker + Ubuntu上で銘柄選択・発注処理を実行し、WindowsのカブコムAPIにREST API接続**する構成が実用的。ゲーミングPC内で完結させれば運用コストゼロ。（TAK1123, 2023/11）
- Dockerで動かす場合、Kabuステーション起動が必要なカブコムAPIは使えないため、**立花証券e支店API一択**になる。（tomo, 2023/10）
- **AWSのWindows Server（t3.small）** でKabuステーションの情報取得が動作し、常時起動で約30 USD/月、休日・時間外停止で10 USD/月未満。（hori_ryota, 2023/12）
- MacのDockerコンテナまたはAWSクラウド上での自動売買システム運用も選択肢。（ryoji, 2023/10）
- 複数人での開発は**Notebookの共有よりGitHubでライブラリ形式での開発**が筋が良い。（tomo, 2023/03）

## 5. GPU・機械学習の実行環境

- GPU学習環境は**Google Colab、GCPが主流**。RTX-4090等のローカルGPUに飛躍しなくてもクラウドで十分。（UKI, richwomanbtc, kojisuganuma, 2023/01）
- **GCEのスポットインスタンス**はColabのクレジットより低コストになる可能性があり、ライブラリのバージョン管理も厳密にでき長期の再現性を担保できる。（hiohiohio, 2023/01）
- Colabの課題：学習1回で1ヶ月分のクレジットを使い切ることがある。インスタンスのロケーションが不定でGCSからのネットワーク転送量が1回あたり300〜400円かかる。（hiohiohio, 2023/01-02）
- **GCPでインスタンスを自前構築すると、タスクに応じてインスタンスサイズを調整でき、プリエンプティブルも選択可能**でコスト最適化できる。ロケーション固定によるネットワーク転送費の削減も利点。（hiohiohio, 2023/02）

## 6. データ取得・データソース

- **J-Quants API** は日足が基本。プレミアムプランで前場後場の価格データが取得可能だが、分足データは未提供。（pegion, 2025/05）
- **yfinance** は過去数日分の1分足・5分足が取得可能で、無料の入門用データソースとして有用。（2corgi, 2023/10）
- **タワースコープ** は全銘柄の1分足をWeb API経由で取得可能（開発者申請が必要）。60秒に1回のリクエストでほぼリアルタイムなデータが得られる。（のーひこ, 2023/04）
- **DATA-GET2** は4本足のダウンロードやリアルタイム株価取得のサービスで、試用期間があり開発者申請不要の可能性あり。（のーひこ, 2023/04）
- **銘柄コードにアルファベットが含まれるケース**（Tokyo Pro Market上場銘柄「132A」等）が2024年1月から発生。`pd.to_numeric(df['Code'], errors='coerce').notnull()` で整数以外のコードを除外する対処が可能。（aladdin, 2024/01）
- データの一貫性のためにデータ取得元はある程度限定して選定すべき。（pen.jp, 2024/06）

## 7. データ分析・BIツール

- 株価データの分析にBIツール（Looker, Metabase等）を使っている事例は少ない。金融機関ではBloomberg BQuant、DataRobotなどが使われるが個人にはコスト面で課題。（tomo, 2022/12）
- **Grafana** はダッシュボード用途で有用。Financeプラグインでデータ連携可能。（richwomanbtc, 2022/12）
- **BigQuery Connected Sheet**（無料）で統計処理や線形回帰が可能。**Looker Studio**（無料）もBQクエリ料金以外は無料で利用可能。（kojisuganuma, 2022/12）
- BigQueryにパブリックデータとして株価データを公開すると非常に使いやすいが、課金・収益化の仕組みが課題でビジネス持続性に難がある。（tomo, 2022/12）
- GCPのIAP（Identity-Aware Proxy）を使えばGoogleアカウントごとにアクセス認証をかけられる。（jojojoz, 2022/12）

## 8. トレーディングプラットフォーム

- **MT5（MetaTrader 5）** はFX・CFDに特化したトレーディングプラットフォームで、C++ライクなスクリプト言語でバックテストと実運用を同時実行可能。PythonからのAPI操作にも対応。（がうぅ！？, 2025/04）

## 9. 投資AIエージェント・最新動向（2026年）

- **投資AIエージェントの「初心者セット」が確立しつつある**：株価・財務情報はJ-Quants APIまたはyfinance、イベントスタディはEDINET API（無料）など、無料で基盤構築が可能な時代に。（UKI, tomo, 2026/02）
- **Claude Codeの登場**により、カブコムAPIのような従来扱いにくかったアーキテクチャも負担なく使えるようになった。APIドキュメントの理解やコード生成がAIで自動化される。（tomo, UKI, 2026/02）

## 10. システムトレードのモチベーション

- 行動経済学的な観点から、**人間の心理バイアス（落ちるナイフを掴む等）を排除するため**にシストレに関心を持つ人が多い。特に本業中は冷静な判断が難しい。（TAK1123, 2022/10）

## 11. J-Quants APIの制約

- 日経225オプションの日次四本値データにはBid/Ask等の気配情報や約定方向情報は含まれておらず、PDI・CDI・TVCR・Flow Momentum等の指標は算出不可。（shun, 2026/02）

---

*出典：マケデコ Discord #システム構築チャンネル（2022/09〜2026/02）の議論より抽出・整理*
