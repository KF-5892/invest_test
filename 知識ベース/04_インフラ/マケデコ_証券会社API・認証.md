# マケデコ知見：証券会社API・発注手段・認証

マケデコDiscord #システム構築チャンネル（2022年9月〜2026年2月）より抽出。

---

## 1. 証券会社API・発注手段

- 日本株でオフィシャルにAPIを提供している証券会社は主に3つ：**楽天証券RSS**、**auカブコム証券API**、**岡三証券API**。取り扱いアセットは各社で異なる。（tomo, 2022/09）
- **立花証券e支店API** はクラウドサーバーにデプロイして自動売買が可能で、暗号資産Botと同様の感覚で運用できる。ゲートウェイ不要なのがカブコムAPIに対する優位点。（katsu1110, 2023/02）
- **カブコムAPI** はKabuステーションの起動が必要でWindows環境に縛られるが、PUSH APIによるリアルタイム株価取得が可能。Claude Codeの登場でAPI操作の負担が大幅に軽減された。（UKI, 2026/02）
- API非対応の証券会社では、**SeleniumなどによるWeb発注の自動化**が選択肢になるが、スクレイピングの許可状況や負荷への配慮が必要で自己責任の領域。ヘッドレスモードでの発注は時間がかかりエラーも多い。（ともぞー, shinshin, 2022/09）
- **Playwrightを使った無理やりの自動化**が、API非対応の証券会社では依然として必要。（UKI, 2026/02）
- SBIネオトレードはエクセル連携方式のため使いづらい。楽天RSSもエクセルアドイン形式。（UKI, 2026/02）

---

## 2. 二段階認証・ログイン自動化の課題

- **Kabuステーションは日次で再起動が必要**で、サーバ起動時の各アプリ自動起動の整備が必須。2025年6月からメールによる二段階認証が加わり、自動化のハードルがさらに上昇。（hori_ryota, kazumoto#123, 2023/12〜2025/06）
- **二段階認証の自動化手法**として以下が議論されている：
  - IMAPでメール受信→送信元・件名でフィルタ→正規表現でワンタイムコードを抽出（lowlowlevelctf, 2025/08）
  - Gmail APIを利用してワンタイムパスワードを取得（GitHub issue #979参照）（umihico, 2025/08）
  - メールをAWS S3に転送し、そこからコードを抽出（umihico, 2025/08）
  - APIフレンドリーなメールサービスにワンタイムパスだけ転送し、提供APIで抽出（umihico, 2025/08）
- **立花証券e支店は2025年7月末から電話番号認証が必要**に。自動化手法として**Twilioで050番号を契約→登録番号としてログイン前にTwilioでcall**する方法が提案された。着信転送も設定すると安心。（kazumoto#123, Morim34, 2025/07）
- ワンタイムパスワードのメール到着が5分の有効期限内に届かないことがある点が実運用上の問題。（lowlowlevelctf, 2025/08）

---

## 3. トレーディングプラットフォーム

- **MT5（MetaTrader 5）** はFX・CFDに特化したトレーディングプラットフォームで、C++ライクなスクリプト言語でバックテストと実運用を同時実行可能。PythonからのAPI操作にも対応。（がうぅ！？, 2025/04）

---

*出典：マケデコ Discord #システム構築チャンネル（2022/09〜2026/02）の議論より抽出・整理*
